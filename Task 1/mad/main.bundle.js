$(document).ready((function(){"true"===localStorage.getItem("rememberMe")&&($("#loginUsername").val(localStorage.getItem("username")),$("#loginPassword").val(localStorage.getItem("password")),$("#form-checkbox").prop("checked",!0)),$("#loginForm").on("submit",(function(e){e.preventDefault(),function(e,o){var r="https://fond-generally-stag.ngrok-free.app/Task%201/php";console.log(e),$.ajax({type:"POST",url:"".concat(r,"/login.php"),dataType:"json",data:e,success:function(e){var r;console.log(e);try{r=e}catch(e){return void console.error("Failed:",e)}"success"===r.status?(localStorage.setItem("email",r.email),o?(localStorage.setItem("session_token",r.token),localStorage.setItem("rememberMe",!0),localStorage.setItem("username",$("#loginUsername").val()),localStorage.setItem("password",$("#loginPassword").val())):(sessionStorage.setItem("session_token",r.token),localStorage.removeItem("rememberMe"),localStorage.removeItem("username"),localStorage.removeItem("password")),window.location.href="profile.html"):alert(r.message)},error:function(e,o,r){console.error("AJAX Error:",o,r),console.error("Response Text:",e.responseText),alert("An error occurred while processing your request. Please try again.")}})}($(this).serialize(),$("#form-checkbox").is(":checked"))}))}));